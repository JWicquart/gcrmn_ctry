---
title: "Analyses - Maps"
author : "Nina Prasil & Jeremy Wicquart"
date: "`r Sys.Date()`"
output: 
  html_document:
    theme: "cosmo"
    highlight: tango
    toc: true
    toc_float:
      collapsed: false
      smooth_scroll: false
    toc_depth: 4
---

```{r setup, include=FALSE}

knitr::opts_chunk$set(echo = TRUE, fig.align = "center")

```

# Defining functions and packages

```{r base}

# 1. Source functions ----

source("functions/graphical_par.R")
source("functions/theme_graph.R")

# 2. Required packages ----

library(tidyverse) # Core tidyverse packages
library(sf) # To plot maps

# 3. Set default ggplot theme ----

theme_set(theme_graph())

```

# Reef area by country

```{r}

# 1. Load data ----

load(file = "./../data/reefs.eez.Rdata")

# 2. Transform to an sf object ----

reefs.eez <- reefs.eez %>% 
  st_as_sf()

# 3. Make the plot ----

ggplot() +
  geom_sf(data = reefs.eez, aes(fill = SOVEREIGN1), show.legend = FALSE)

# 4. Name of countries with reefs ----

unique(reefs.eez$SOVEREIGN1)

# 5. Number of country with reefs ----

length(unique(reefs.eez$SOVEREIGN1))

```

# Background maps

```{r}

# 2. Load background map data ----

# 2.1 Major islands --

land_major <- read_sf("../data/01_maps/ne_10m_land/ne_10m_land.shp")

# 2.2 Minor islands --

land_minor <- read_sf("../data/01_maps/ne_10m_minor_islands/ne_10m_minor_islands.shp")

# 3. Make the map ----

temp <- data_file %>% distinct(Area, Country, Archipelago, Location, Site, .keep_all = T)

data_map <- data_file %>% 
  select(Latitude, Longitude) %>% 
  distinct()

data_file %>% 
  select(Latitude, Longitude) %>% 
  distinct() %>% 
  ggplot() +
  geom_sf(data = land_major, fill = col_fill_map, col = col_color_map) +
  geom_sf(data = land_minor, fill = col_fill_map, col = col_color_map) +
  geom_point()

```

# Reproducibility

```{r reprod}

# 1. Reproducibility ----

sessionInfo()

```

---
Nina PRASIL & Jeremy WICQUART | `r format(Sys.time())`